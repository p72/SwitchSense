# 🌡️ SwitchBot Temperature Monitor

SwitchBotの温度計デバイスをモニタリングし、リモコン操作もできるStreamlitアプリやで〜！✨

## 📋 機能

### 🌡️ 温度監視機能
- 🌡️ リアルタイム温度表示（摂氏・華氏）
- 💧 湿度表示
- 🔋 バッテリー残量表示（色分け）
- 🔄 自動更新機能（5-60秒間隔）
- 📱 美しいカード形式のWebインターフェース

### 📺 リモコン操作機能
- 📺 **テレビ制御** - 電源、音量、チャンネル操作
- ❄️ **エアコン制御** - 電源ON/OFF、温度設定、モード変更
- 💡 **照明制御** - 電源、明るさ調整
- 🔧 **その他のデバイス** - 汎用制御

### 🏠 統合管理機能
- 🌡️ **温度計デバイス監視** - リアルタイム温度・湿度・バッテリー表示
- 📱 **デバイス分類** - 自動的にデバイスをカテゴリ別に分類
- 🔄 **リアルタイム更新** - 手動・自動更新機能
- 📊 **デバイス集計** - サイドバーでデバイス数の確認
- 🔧 **Hub Mini表示** - 操作対象外デバイスの情報表示

## 🚀 セットアップ

### 1. 依存関係のインストール

```bash
# 仮想環境を使用
source .venv/bin/activate

# 依存関係をインストール
pip install requests streamlit python-dotenv
```

### 2. SwitchBot API認証情報の設定

1. **SwitchBotアプリ**を開く 📱
2. **設定 → アプリバージョン → 開発者オプション**に進む
3. **Open Token**と**Secret Key**を取得

### 3. 環境変数の設定

`.env`ファイルを編集して、実際の認証情報を設定してください：

```bash
# .env
SWITCHBOT_TOKEN=あなたの実際のトークン
SWITCHBOT_SECRET=あなたの実際のシークレット
```

## 🎮 アプリの起動

### 📺 統合アプリ（メイン）

```bash
streamlit run tv_controller.py --server.port 8502
```

**URL**: `http://localhost:8502`

## 📁 ファイル構成

```
SwitchSense/
├── tv_controller.py        # 📺 統合アプリケーション（メイン）
├── switchbot_api.py        # 🔌 SwitchBot APIクライアント
├── test_ir_control.py      # 🎮 IRリモコン操作テスト
├── .env                    # ⚙️ 環境変数設定
├── .gitignore              # 🚫 Git除外設定
├── .gitmessage             # コミットテンプレート
├── pyproject.toml          # ⚙️ プロジェクト設定
├── uv.lock                 # 🔒 依存関係ロック
├── replit.md               # 📖 技術仕様書（英語）
├── replit_ja.md            # 📖 技術仕様書（日本語）
└── README.md               # 📖 このファイル
```

## 🎯 対応デバイス

### 🌡️ 温度監視対応デバイス
- SwitchBot Meter
- SwitchBot Meter Plus  
- SwitchBot Outdoor Meter
- その他のMeter系デバイス

### 📺 リモコン操作対応デバイス
- **物理デバイス**: SwitchBot Bot、SwitchBot Curtain、SwitchBot Light
- **仮想IRリモコン**: テレビ、エアコン、照明（Hub Mini経由）

### 🔧 情報表示デバイス
- **Hub Mini** - 操作対象外、情報表示のみ

## 🔧 トラブルシューティング

### よくある問題

1. **認証情報が見つからない**
   - `.env`ファイルが正しく設定されているか確認
   - SwitchBotアプリでAPI認証情報を取得済みか確認

2. **デバイスが見つからない**
   - SwitchBotデバイスがオンラインか確認
   - 温度計デバイス（Meter、Meter Plus、Outdoor Meter）が登録されているか確認
   - リモコン操作の場合、Hub Miniが設定されているか確認

3. **APIエラー**
   - インターネット接続を確認
   - API認証情報が正しいか確認
   - API制限に達していないか確認

4. **リモコン操作ができない**
   - Hub Miniがオンラインか確認
   - 仮想IRリモコンが正しく設定されているか確認
   - デバイスが制御可能な状態か確認

5. **温度計が表示されない**
   - デバイスタイプが`Meter`系か確認
   - デバイスがオンラインか確認
   - API認証情報が正しいか確認

6. **Hub Miniが表示されない**
   - Hub Miniがオンラインか確認
   - デバイスタイプが`Hub Mini`か確認
   - API認証情報が正しいか確認

## 🎮 使用方法

### 🌡️ 温度監視
1. 統合アプリ（tv_controller.py）を起動
2. **🌡️ Thermometer Devices**セクションを確認
3. 温度単位（摂氏/華氏）を選択
4. リアルタイムで温度・湿度・バッテリーを監視
5. 手動更新ボタンでデータを再取得

### 📺 リモコン操作
1. 統合アプリを起動
2. デバイスカテゴリ（テレビ・エアコン・照明）を選択
3. 各デバイスの操作ボタンをクリック
4. 電源、音量、温度設定などの操作を実行

### 🔧 Hub Mini表示
1. 統合アプリを起動
2. **🔧 Hub Devices**セクションを確認
3. Hub Miniの存在と情報を確認
4. 操作ボタンは表示されません（操作対象外）

### 📱 統合管理
1. **tv_controller.py**を起動
2. 温度計デバイスが自動的に分類・表示される
3. 温度・湿度・バッテリーをリアルタイム監視
4. リモコン操作も同じ画面で実行
5. サイドバーでデバイス数の確認

## 🔧 開発・テスト

### 🎮 IRリモコン操作テスト

```bash
python test_ir_control.py
```

### 📖 技術仕様書

- **英語版**: `replit.md`
- **日本語版**: `replit_ja.md`

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

**使用した生成AIモデル**: Claude Sonnet 4 